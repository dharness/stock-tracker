# GitHub Actions Setup for Daily Stock Updates

This repository uses GitHub Actions to automatically fetch stock data daily and save it to a static JSON file. This eliminates the need for API calls from the browser, avoiding rate limits and keeping API keys secure.

## Setup Instructions

### 1. Enable GitHub Actions

The workflow is already configured in `.github/workflows/daily_update.yml`. It will:

- Run automatically at midnight UTC every day
- Can be manually triggered from the **Actions** tab (click "Daily Stock Update" > "Run workflow")

### 3. How It Works

1. **GitHub Actions** runs `update_stocks.js` daily at midnight UTC
2. The script fetches stock data from the Massive API for all stocks in your portfolios
3. Data is saved to `public/data/stocks.json`
4. The changes are automatically committed and pushed to the repository
5. **Your website** loads data from the static JSON file instead of making API calls

### 4. Benefits

- ✅ **No rate limits**: Only 1 API call per day total (not per visitor)
- ✅ **Fast loading**: Static JSON file loads instantly
- ✅ **No API keys in browser**: Keys stay secure in GitHub Secrets
- ✅ **Free forever**: GitHub Actions and Pages are free for public repos
- ✅ **Version history**: Git commit history tracks all data changes

### 5. Manual Testing

To test the workflow manually:

1. Go to your repository on GitHub
2. Click the **Actions** tab
3. Select **Daily Stock Update** workflow
4. Click **Run workflow** > **Run workflow**

### 6. File Structure

```
public/
  data/
    stocks.json          # Generated by GitHub Actions (auto-committed)
```

The JSON structure:

```json
{
  "lastUpdated": "2025-01-15T00:00:00.000Z",
  "stocks": {
    "AAPL_2025": [
      { "date": "2025-01-01", "price": 150.25 },
      ...
    ],
    "GOOGL_2025": [...],
    ...
  }
}
```

### 6. Troubleshooting

- **Workflow fails**: Check the Actions tab for error logs
- **Data not updating**: Check if the workflow is running (Actions tab)
- **Local development**: The app will fall back to API calls if JSON file doesn't exist
